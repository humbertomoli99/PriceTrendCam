<Page
    x:Class="PriceTrendCam.Views.AddSelectorsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:behaviors="using:PriceTrendCam.Behaviors"
    behaviors:NavigationViewHeaderBehavior.HeaderMode="Never"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    mc:Ignorable="d">

    <Grid
        x:Name="ContentArea">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition
                    Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>

            <Grid
                Grid.Row="0">
                <Grid.RowDefinitions>
                    <RowDefinition
                        Height="*" />
                    <RowDefinition
                        Height="Auto" />
                </Grid.RowDefinitions>

                <WebView2
                    x:Name="WebView"
                    PointerPressed="WebView_PointerPressed"
                    PointerMoved="WebView_PointerMoved"
                    NavigationCompleted="WebView_NavigationCompleted"
                    Source="{x:Bind ViewModel.Source, Mode=OneWay}" />

                <StackPanel
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Visibility="{x:Bind ViewModel.IsLoading, Mode=OneWay}">
                    <ProgressRing
                        IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}" />
                    <TextBlock
                        x:Uid="WebView_Loading" />
                </StackPanel>

                <StackPanel
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Visibility="{x:Bind ViewModel.HasFailures, Mode=OneWay}">
                    <TextBlock
                        x:Uid="WebView_FailedMessage"
                        HorizontalAlignment="Center"
                        TextWrapping="WrapWholeWords" />
                    <HyperlinkButton
                        x:Uid="WebView_Reload"
                        Command="{x:Bind ViewModel.ReloadCommand}"
                        HorizontalAlignment="Center" />
                </StackPanel>

                <Grid
                    Grid.Row="1">
                    <StackPanel
                        Orientation="Horizontal">
                        <Button
                            x:Uid="BrowserBackButton"
                            Command="{x:Bind ViewModel.BrowserBackCommand, Mode=OneWay}"
                            Margin="{StaticResource XSmallLeftTopRightBottomMargin}"
                            Padding="{StaticResource XXSmallLeftTopRightBottomMargin}">
                            <FontIcon
                                FontFamily="{StaticResource SymbolThemeFontFamily}"
                                Glyph="&#xE72B;" />
                        </Button>
                        <Button
                            x:Uid="BrowserForwardButton"
                            Command="{x:Bind ViewModel.BrowserForwardCommand, Mode=OneWay}"
                            Margin="{StaticResource XSmallLeftTopRightBottomMargin}"
                            Padding="{StaticResource XXSmallLeftTopRightBottomMargin}">
                            <FontIcon
                                FontFamily="{StaticResource SymbolThemeFontFamily}"
                                Glyph="&#xE72A;" />
                        </Button>
                        <Button
                            x:Name="ParentButton"
                            Content="Parent"
                            Visibility="Collapsed"
                            Click="ParentButton_Click"
                            Margin="{StaticResource XSmallLeftTopRightBottomMargin}"
                            Padding="{StaticResource XXSmallLeftTopRightBottomMargin}" />
                        <Button
                            x:Name="ChildrenButton"
                            Content="Children"
                            Visibility="Collapsed"
                            Click="ChildrenButton_Click"
                            Margin="{StaticResource XSmallLeftTopRightBottomMargin}"
                            Padding="{StaticResource XXSmallLeftTopRightBottomMargin}" />
                        <Button
                            x:Name="DoneButton"
                            Content="Done"
                            Visibility="Collapsed"
                            Click="DoneButton_Click"
                            Style="{StaticResource AccentButtonStyle}"
                            Margin="{StaticResource XSmallLeftTopRightBottomMargin}"
                            Padding="{StaticResource XXSmallLeftTopRightBottomMargin}" />
                        <TextBox
                            Visibility="Collapsed"
                            x:Name="TxtSelectedElement"
                            Margin="{StaticResource XSmallLeftTopRightBottomMargin}"
                            Padding="{StaticResource XXSmallLeftTopRightBottomMargin}" />
                    </StackPanel >
                    <StackPanel
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                        <Button
                            x:Uid="ReloadButton"
                            Command="{x:Bind ViewModel.ReloadCommand}"
                            Margin="{StaticResource XSmallLeftTopRightBottomMargin}"
                            Padding="{StaticResource XXSmallLeftTopRightBottomMargin}">
                            <FontIcon
                                FontFamily="{StaticResource SymbolThemeFontFamily}"
                                Glyph="&#xE72C;" />
                        </Button>
                        <Button
                            x:Uid="OpenInBrowserButton"
                            Command="{x:Bind ViewModel.OpenInBrowserCommand}"
                            Margin="{StaticResource XSmallLeftTopRightBottomMargin}"
                            Padding="{StaticResource XXSmallLeftTopRightBottomMargin}">
                            <FontIcon
                                FontFamily="{StaticResource SymbolThemeFontFamily}"
                                Glyph="&#xE774;" />
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>
            <ScrollViewer
                Grid.Row="2">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                    </Grid.RowDefinitions>

                    <ComboBox
                        x:Name="GetTypeDataComboBox"
                        Header="Type:"
                        ItemsSource="{x:Bind TypeDataComboBox, Mode=TwoWay}"
                        SelectedItem="{x:Bind ViewModel.TypeDataComboBox, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        Grid.Row="0"
                        Loaded="GetTypeDataComboBox_Loaded"
                        Margin="0,5">
                    </ComboBox>

                    <TextBlock
                        Grid.Row="1">Selector:</TextBlock>
                    <Grid
                        Grid.Row="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="Auto" />
                            <ColumnDefinition
                                Width="Auto" />
                            <ColumnDefinition
                                Width="*" />
                        </Grid.ColumnDefinitions>
                        <Button
                            x:Name="SelectButton"
                            Content="Select"
                            Margin="0,0,10,0"
                            Click="SelectButton_Click"
                            Grid.Column="0" />
                        <Button
                            x:Name="ElementPreviewButton"
                            Content="Element Preview"
                            Margin="0,0,10,0"
                            Click="ElementPreviewButton_Click"
                            Grid.Column="1" />
                    </Grid>

                    <TextBox
                        x:Name="SelectorTextBox"
                        HorizontalAlignment="Stretch"
                        Text="{x:Bind ViewModel.SelectorTextBox, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                        TextChanged="SelectorTextBox_TextChanged"
                        Margin="0,5"
                        Grid.Row="3" />

                    <ComboBox
                        x:Name="GetAttributeComboBox"
                        IsEditable="True"
                        ItemsSource="{x:Bind AttributesComboBox, Mode=TwoWay}"
                        SelectedItem="{x:Bind ViewModel.GetAttributeComboBox, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        Header="Get Attribute"
                        Loaded="GetAttributeComboBox_Loaded"
                        Grid.Row="4"
                        Margin="0,5">
                    </ComboBox>

                    <TextBox
                        x:Name="RegexTextBox"
                        Text="{x:Bind ViewModel.RegexTextBox, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        PlaceholderText="Regular Expression"
                        Header="Regex:"
                        Grid.Row="5"
                        Margin="0,5" />

                    <CheckBox
                        x:Name="IsNotNullCheckBox"
                        Content="Not Null"
                        IsChecked="{x:Bind ViewModel.IsNotNullCheckBox, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        Grid.Row="6" />

                    <Button
                        x:Name="DataPreviewButton"
                        Content="Data Preview"
                        Margin="0,0,10,0"
                        Click="DataPreviewButton_Click"
                        Grid.Row="7" />
                    
                    <StackPanel
                        Orientation="Horizontal"
                        Margin="0,5"
                        Grid.Row="8">
                        <Button
                            x:Name="SaveButton"
                            Content="Save Selector"
                            Margin="0,0,10,0"
                            Style="{StaticResource AccentButtonStyle}"
                            Command="{x:Bind ViewModel.SaveSelectorsCommand}"
                            Click="SaveButton_Click" />
                        <Button
                            x:Name="CancelButton"
                            Content="Cancel"
                            Click="CancelButton_Click" />
                    </StackPanel>
                </Grid>
            </ScrollViewer>
            
            <controls:GridSplitter
                Grid.Row="1"
                Height="5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Center"
                Background="Black" />
        </Grid>
        
    </Grid>
</Page>
